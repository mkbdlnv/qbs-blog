<?php

namespace Database\Seeders;

use App\Models\Post;
use App\Models\Tag;
use Illuminate\Database\Console\Seeds\WithoutModelEvents;
use Illuminate\Database\Seeder;
use Illuminate\Support\Str;

class PostSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        $posts = [
            [
                'title' => 'Будущее искусственного интеллекта',
                'content' => 'Искусственный интеллект меняет нашу жизнь, автоматизируя сложные процессы и создавая новые возможности. От автономных автомобилей до продвинутых языковых моделей, развитие технологий стремительно растет. Однако остаются вопросы о безопасности и этике использования AI.',
                'tags' => ['Технологии', 'Наука']
            ],
            [
                'title' => 'Как поддерживать здоровый образ жизни',
                'content' => 'Здоровый образ жизни включает сбалансированное питание, физическую активность и заботу о ментальном здоровье. Важно уделять внимание качеству сна, избегать стрессов и находить время для отдыха. Регулярные упражнения помогают поддерживать здоровье сердца и улучшать настроение.',
                'tags' => ['Здоровье', 'Образование']
            ],
            [
                'title' => 'Искусство фотографии: секреты мастерства',
                'content' => 'Фотография – это не просто нажатие на кнопку камеры, а искусство запечатлеть момент. Композиция, свет и правильные настройки играют ключевую роль. Лучшие кадры получаются, когда фотограф видит красоту в простых вещах.',
                'tags' => ['Искусство', 'Технологии']
            ],
            [
                'title' => 'Будущее космических путешествий',
                'content' => 'Человечество делает большие шаги в освоении космоса. Частные компании разрабатывают новые ракеты, а исследователи мечтают о колонизации Марса. Космический туризм становится реальностью, приближая нас к жизни среди звезд.',
                'tags' => ['Наука', 'Технологии']
            ],
            [
                'title' => 'Лучшие направления для путешествий в 2025 году',
                'content' => 'С каждым годом путешествия становятся доступнее и разнообразнее. В 2025 году популярностью пользуются экзотические направления, такие как Бали, Исландия и Япония. Туристы все больше ценят экологичный отдых и культурное обогащение.',
                'tags' => ['Путешествия', 'Еда']
            ],
            [
                'title' => 'Футбол: почему этот спорт объединяет миллионы людей',
                'content' => 'Футбол – это не просто игра, а целая культура, объединяющая людей по всему миру. Чемпионаты и клубные турниры собирают миллионы зрителей, создавая невероятные эмоции. Эта игра учит командной работе и стремлению к победе.',
                'tags' => ['Спорт']
            ],
            [
                'title' => 'Будущее видеоигр: виртуальная реальность и искусственный интеллект',
                'content' => 'Игровая индустрия развивается стремительно, внедряя новые технологии. Виртуальная реальность позволяет полностью погружаться в игровой процесс, а искусственный интеллект делает NPC более реалистичными. Будущее гейминга обещает новые уровни взаимодействия.',
                'tags' => ['Игры', 'Технологии']
            ],
            [
                'title' => 'Как музыка влияет на наше настроение',
                'content' => 'Музыка может поднимать настроение, помогать сосредоточиться или даже снижать стресс. Исследования показывают, что разные жанры музыки воздействуют на мозг по-разному. Выбор правильного плейлиста может сделать день лучше.',
                'tags' => ['Музыка', 'Здоровье']
            ]
        ];

        foreach ($posts as $postData) {
            $post = Post::create([
                'title' => $postData['title'],
                'slug' => Str::slug($postData['title']),
                'content' => $postData['content']
            ]);

            $tags = Tag::whereIn('name', $postData['tags'])->get();
            $post->tags()->attach($tags);
        }
    }
}
